---
title: "R_Tutorial"
author: "Yunshu Zhang"
date: "October 7, 2018"
output:
  word_document: default
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##????????????
???????????????????????????  
?????????????????????????????????:????????????+???????????????  
??????R??????

##???????????????R???
1. ??????????????????????????????/???????????????(??????)  
2. ?????????????????????DNA??????(??????)
3. ????????????????????????????????????(??????)
..  
??????:????????????  

##??????????????????R???
SAS:??????????????????R  
Python: data frame????????????pandas,?????????????????????/?????????R  

##R, R Studio, R Markdown
??????

####R Stuido: IDE
??????:  
1. ?????????-?????????:??????????????????  
2. ?????????-??????:??????????????????  
3. ?????????-????????????????????????:???????????????,???,???,??????(!!!),??????  
4. ?????????-?????????:???????????????(R Script)

####R Markdown:??????
Markdown: ????????????????????????????????????(?????????????????????)  
???????????????:?????????insert ??? ctrl+alt+I  
???????????????:???????????? ??? ctrl+shift+enter  
????????????????????????:
```{r}
x = 1
x
```

???Knit??????,??????:html,word,pdf(???????????????,??????????????????????????????)
```{r echo=FALSE}
x = rnorm(100)
y = rnorm(100)
plot(x,y)
```

??????:latex??????  
??????Mathtype:???????????????????????????????????????
\[\alpha  + \beta  = \gamma \]
????????????:$\alpha  + \beta  = \gamma$  

R Markdown ??????????????????PPT..

??????:   

two space + enter


??????:
1. ???????????????  
2. ??????????????????  
3. ??????????????????????????????  

??????:
??????????????????debug  

##???????????????
??????????????????R????????? ?????? ?????????????????????  
???R prograMming for data science??? Roger D. Peng  
???R???????????????

##??????
????????????????????????  
???????????????????????????(???????????????????????????)  
????????????????????????  

##R???????????????
character, integer, numeric, complex, logical  
is.xxx:????????????????????????
as.xxx:????????????????????????
class:??????????????????
```{r}
x = 1
x
is.integer(x)
is.numeric(x)
class(x)
x = as.integer(x)
x
is.integer(x)
is.numeric(x)
class(x)
```


```{r}
x = "whosyourdaddy"
x
is.character(x)
as.numeric(x)
```

```{r}
x = TRUE
is.logical(x)
x = T
x = FALSE
x = F
is.logical(x)
```

NA:?????????(???????????????)

##R???????????????
```{r}
x = 1
y = x + x
y
z = y * y
z
w = z ^ z
w
v = z %% 3
v
```

```{r}
x == 1
(x == 1) & (y != 2)
(x == 1) | (y != 2)
```

##R???????????????

####vector
```{r}
x = 2:10
x
y = c(1, 2, 4)
y
z = c(x, y)
z
seq(from = 2, to = 10, by = 2)
seq(from = 2, to = 10, length.out = 5)
rep(0, 10)
rep(c(0,1), 10)
```

####matrix
elementwise operation
```{r}
x = matrix(data = c(1, 0, 0, 1), nrow = 2, ncol = 2, byrow = T)
x
y = matrix(data = c(1, 1), nrow = 2, ncol = 2)
y
x + y
x * y
x %*% y
rbind(x, y)
cbind(x, y)
```

####factor
categorical data(???????????????):?????????  
????????????????????????????????????????????????factor:???excel??????????????????????????????

####data frame
R??????????????????????????????????????????  
???:???????????????(?????????????????????)
???:???????????????
```{r}
data(iris)
#View(iris)
dim(iris)
nrow(iris)
ncol(iris)
names(iris)
colnames(iris) = c("sl", "sw", "pl", "pw", "s")
names(iris)
```

####array
????????????  
?????????????????????..

####list
???????????????????????????list????????????  
???????????????????????????????????????data frame


##?????????????????????
???????????????  
??????,??????,??????,????????????,?????????,????????????,??????,??????  
??????????????????run????????????  
????????????baidu/google
```{r}
seq(0, 1, length.out = 11)
seq(stats::rnorm(20)) # effectively 'along'
seq(1, 9, by = 2)     # matches 'end'
seq(1, 9, by = pi)    # stays below 'end'
seq(1, 6, by = 3)
seq(1.575, 5.125, by = 0.05)
seq(17) # same as 1:17, or even better seq_len(17)
```


##???????????????
??????????????????
session->set working directory
```{r}
setwd("D:/OneDrive/R tutorial")
```

```{r}
baby = read.table(file = "baby.txt", header = T)
cause = read.csv(file = "NCHS_-_Leading_Causes_of_Death__United_States.csv", header = T)
```

excel??????:  
?????????:????????????csv??????  
?????????:xlsx??????read.xlsx

##???(package)
R?????????????????????  
??????:install.packages() ??? Tools -> InsTall packages  
????????????????????????baidu/google..
??????:library
```{r}
library(xlsx)
contact = read.xlsx(file = "contact.xlsx", sheetIndex = 1, encoding = "UTF-8")
```

????????????:encoding = "UTF-8"  
?????????????????????:Sys.setlocale(locale='Chinese')  
????????????????????????????????????!!!

##?????????????????????
??????[]?????????
```{r}
iris[1,1]
iris[1,"sl"]
iris[1,]
iris[1:10,"sl"]
iris[,-1]
```

???????????????variable
```{r}
iris$sl[1:10]
attach(iris)
sl[1:10]
detach(iris)
```

???????????????
```{r}
iris$mean.size = (iris$sl + iris$sw + iris$pl + iris$pw) /4 
iris[1:10,]
```

??????subset?????????
```{r}
setosa = subset(iris, s == "setosa", select = -s)
setosa[1:10,]
setosa.large = subset(setosa, mean.size > mean(mean.size))
nrow(setosa)
nrow(setosa.large)
```

##?????????????????????
```{r}
sum = 0
count = 0
for(i in 1:nrow(iris)){
  if(iris[i, "s"] == "setosa"){
    sum = sum + iris[i, "mean.size"]
    count = count + 1
  }
}
sum / count
```

```{r}
mean(setosa$mean.size)
```

##????????????
```{r}
plot(x = iris$sl, y = iris$pl, main = "Sepal Length vs Petal Length", xlab = "Sepal Length", ylab = "Petal Length")
```

```{r}
hist(iris$sl)
```

????????????  
ggplot2

##??????????????????
```{r}
length(iris$sl)
mean(iris$sl)
sd(iris$sl)
var(iris$sl)
cov(iris$sl,iris$pl)
cor(iris$sl,iris$pl)
```

```{r}
mod = lm(pl ~ sl, data = iris)
summary(mod)
```

```{r}
dbinom(50, 100, 0.5)
pcauchy(0)
qnorm(0.025, lower.tail = F)
runif(10)
```

##???????????????
```{r}
my.function = function(x, y){
  mod = lm(y ~ x)
  return("MSE" = sqrt(sum(mod$residuals^2)/(length(mod$residuals) - 2)))
}
```

```{r}
my.function(iris$sl, iris$pl)
```



